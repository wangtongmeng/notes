## 网络

## http缓存

**强制缓存**

Cache-Control

- Response Headers中
- 控制强制缓存的逻辑
- 例如 Carch-Control: max-age=10（单位/秒）
- 相关值：**max-age、no-cache**（浏览器不缓存，交给服务器来控制缓存）、no-store（浏览器和服务器都不缓存）、private（只允许最终用户缓存）、public（允许中间代理服务也能缓存）

关于Expires

- 同在 Response Headers中
- 同为控制缓存过期
- 已被 Cache-Control 代替

**协商缓存（对比缓存）**

- 服务端缓存策略（由服务端判断，缓存还是在浏览器端）
- 服务端判断客户端资源，是否和服务端资源一样
- 一致则返回304，否则返回200和最新的资源

<img src="http://cdn.wangtongmeng.com/20231006213123-bbd8b0.png" style="zoom:30%;" />

资源标识

- 在 Response Headers 中，有两种
- Last-Modified 资源的最后修改时间
- Etag 资源的唯一标识（一个字符串，类似人类的指纹）

Last-Modified

<img src="http://cdn.wangtongmeng.com/20231006213528-ba0aed.png" style="zoom:33%;" />

Etag

<img src="http://cdn.wangtongmeng.com/20231006214042-383935.png" style="zoom:33%;" />

Last-Modified 和 Etag

- 会优先使用 Etag
- Last-Modified 只能精确到秒级
- 如果资源被重复生成，而内容不变，则 Etag 更精确



<img src="http://cdn.wangtongmeng.com/20231006214510-107d6e.png" style="zoom:33%;" />

## 刷新页面对http缓存的影响

三种刷新操作

- 正常操作：地址栏输入 url，跳转链接，前进后退等
- 手动刷新：F5，点击刷新按钮，右键菜单刷新
- 强制刷新：ctrl + F5

不同刷新操作，不同的缓存策略

- 正常操作：强制缓存有效，协商缓存有效
- 手动刷新：强制缓存失效，协商缓存有效
- 强制刷新：强制缓存失效，协商缓存失效

## https

- http 和 https
- 加密方式：对称加密，非对称加密
- https 证书

http 和 https

- http 是明文传输，敏感信息容易被中间劫持
- https = http + 加密，劫持了也无法解密
- 现代浏览器已开始强制 https 协议

加密方式

- 对称加密： 一个 key 同时负责加密、解密，成本低。
- 非对称加密：一对 key，A 加密之后，只能用 B 来解密
- https 同时用到了这两种加密方式

https 证书

- 中间人攻击（伪造pubicKey和key，这样就能解密到信息了）
- 使用第三方证书（慎用免费、不合规的证书）
- 浏览器校验证书



![](http://cdn.wangtongmeng.com/20231006225032-0a1382.png)

## 请描述 TCP 三次握手和四次挥手

建立 TCP 连接

- 先建立连接（确保双方都有收发消息的能力）
- 再传输内容（如发送给一个 get 请求）
- 网络连接是 TCP 协议，传输内容是 HTTP 协议

三次握手 - 建立连接

- Client 发包，Server 接收。Server：有 Client 要找我
- Server 发包，Client 接收。Client：Server 已经收到消息了
- Client 发包，Server 接收。Server：Client 要准备发送了

前两次确定双方都能通信，再正式传输内容

四次挥手

- Client 发包，Server 接收。Server：Cient 已经请求结束
- Server 发包，Cilent 接收。Client：Server 已收到，我等待它关闭
- Server 发包，Client 接收。Client：Server 此时可以关闭连接了
- Client 发包，Server 接收。Server：可以关闭了（然后关闭连接）

![image-20231016150219425](C:\Users\wtm\AppData\Roaming\Typora\typora-user-images\image-20231016150219425.png)